
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Editor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">
    <div class="container mt-5">
        <h1 class="text-center">AI Profiles Editor</h1>
        <table class="table table-dark table-striped mt-4">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Aggressiveness</th>
                    <th>Evasion</th>
                    <th>Engagement Range (km)</th>
                    <th>Conserve Fuel</th>
                    <th>Conserve Weapons</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="ai-profile-table"></tbody>
        </table>
    </div>

    <script>
        async function loadProfiles() {
            const res = await fetch('/api/ai_profiles');
            const profiles = await res.json();
            const table = document.getElementById('ai-profile-table');
            table.innerHTML = '';

            profiles.forEach(profile => {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td>${profile.name}</td>
                    <td><input type="number" min="1" max="10" value="${profile.aggressiveness}" id="agg-${profile.id}" /></td>
                    <td><input type="number" min="1" max="10" value="${profile.evasion}" id="eva-${profile.id}" /></td>
                    <td><input type="number" value="${profile.engagement_range}" id="range-${profile.id}" /></td>
                    <td><input type="checkbox" ${profile.conserve_fuel ? 'checked' : ''} id="fuel-${profile.id}" /></td>
                    <td><input type="checkbox" ${profile.conserve_weapons ? 'checked' : ''} id="weap-${profile.id}" /></td>
                    <td><button class="btn btn-sm btn-success" onclick="saveProfile(${profile.id})">Save</button></td>
                `;

                table.appendChild(row);
            });
        }

        async function saveProfile(id) {
            const data = {
                aggressiveness: parseInt(document.getElementById(`agg-${id}`).value),
                evasion: parseInt(document.getElementById(`eva-${id}`).value),
                engagement_range: parseFloat(document.getElementById(`range-${id}`).value),
                conserve_fuel: document.getElementById(`fuel-${id}`).checked,
                conserve_weapons: document.getElementById(`weap-${id}`).checked
            };

            const res = await fetch(`/api/ai_profiles/${id}`, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            if (res.ok) {
                alert("Profile saved!");
            } else {
                alert("Error saving profile!");
            }
        }

        loadProfiles();
    </script>
</body>
</html>
